# Emergence Kernel Configuration
# This file contains kernel build configuration options.
#
# Usage:
#   make                    # Use default values from this file
#   make CONFIG_SPINLOCK_TESTS=1  # Override specific option
#
# To create a local override (not committed to git):
#   cp kernel.config .config
#   # Edit .config with your preferences

# ========================================================================
# Test Configuration
# ========================================================================

# Spin lock tests - Test synchronization primitives (spinlocks, rwlocks)
# Set to 1 to enable, 0 to disable
CONFIG_SPINLOCK_TESTS ?= 0

# PMM (Physical Memory Manager) tests - Test memory allocation
# Set to 1 to enable, 0 to disable
CONFIG_PMM_TESTS ?= 0

# APIC timer test - Test APIC timer interrupts with quote output
# Set to 1 to enable, 0 to disable
CONFIG_APIC_TIMER_TEST ?= 1

# ========================================================================
# Debug Configuration
# ========================================================================

# SMP AP startup debug marks - Output AP boot progression marks on serial
# Shows: H→G→3→A→P→L→X→D→S→Q→A→I→L→T→W
# Set to 1 to enable, 0 to disable
CONFIG_SMP_AP_DEBUG ?= 0

# ========================================================================
# Nested Kernel Configuration
# ========================================================================

# Write protection verification - Verify Nested Kernel invariants at boot
# Confirms all 6 invariants are enforced on BSP and all APs
# Set to 1 to enable, 0 to disable
CONFIG_WRITE_PROTECTION_VERIFY ?= 1

# Invariants verbose logging - Show detailed per-invariant results
# Set to 1 for detailed output (all 6 invariants with details)
# Set to 0 for summary only (just final PASS/FAIL)
CONFIG_INVARIANTS_VERBOSE ?= 0

# CR0.WP control - Enable two-level protection mechanism
# This implements Invariant 2: write-protection permissions are enforced
# Set to 1 to enable CR0.WP manipulation (REQUIRED for full security)
# Set to 0 to disable (PTE-only protection, LESS SECURE)
CONFIG_CR0_WP_CONTROL ?= 1
