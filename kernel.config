# Emergence Kernel Configuration
# This file contains kernel build configuration options.
#
# Usage:
#   make                    # Use default values from this file
#   make CONFIG_SPINLOCK_TESTS=1  # Override specific option
#
# To create a local override (not committed to git):
#   cp kernel.config .config
#   # Edit .config with your preferences

# ========================================================================
# Test Configuration
# ========================================================================

# Spin lock tests - Test synchronization primitives (spinlocks, rwlocks)
# Set to 1 to enable, 0 to disable
CONFIG_SPINLOCK_TESTS ?= 0

# PMM (Physical Memory Manager) tests - Test memory allocation
# Set to 1 to enable, 0 to disable
CONFIG_PMM_TESTS ?= 1

# APIC timer test - Test APIC timer interrupts with quote output
# Set to 1 to enable, 0 to disable
CONFIG_APIC_TIMER_TEST ?= 1

# ========================================================================
# Debug Configuration
# ========================================================================

# SMP AP startup debug marks - Output AP boot progression marks on serial
# Shows: H→G→3→A→P→L→X→D→S→Q→A→I→L→T→W
# Set to 1 to enable, 0 to disable
CONFIG_SMP_AP_DEBUG ?= 1

# ========================================================================
# Nested Kernel Configuration
# ========================================================================

# Write protection verification - Verify Nested Kernel invariants at boot
# Confirms all 6 invariants are enforced on BSP and all APs
# Set to 1 to enable, 0 to disable
CONFIG_WRITE_PROTECTION_VERIFY ?= 1

# Invariants verbose logging - Show detailed per-invariant results
# Set to 1 for detailed output (all 6 invariants with details)
# Set to 0 for summary only (just final PASS/FAIL)
CONFIG_INVARIANTS_VERBOSE ?= 0

# PCD (Page Control Data) statistics dump - Show page type statistics at boot
# Set to 1 to enable, 0 to disable
CONFIG_PCD_STATS ?= 0

# Nested kernel mappings protection tests - Test nested kernel write protection
# WARNING: These tests will cause intentional page faults and shutdown
# Set to 1 to enable, 0 to disable
CONFIG_NK_PROTECTION_TESTS ?= 0

# Monitor trampoline test - Test CR3 switching via monitor call
# Verifies that monitor_call properly switches to/from privileged mode
# Set to 1 to enable, 0 to disable
CONFIG_MONITOR_TRAMPOLINE_TEST ?= 1
